<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sebastiano Gelmetti | SOC Analyst & Blue Team Specialist</title>
    <meta name="description"
        content="Security Operations Center Analyst specializing in threat detection, incident response, and defensive architecture.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Orbitron:wght@500;700;900&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg: #050505;
            --bg-card: rgba(12, 12, 18, 0.75);
            --cyan: #00f3ff;
            --cyan-g: rgba(0, 243, 255, 0.35);
            --orange: #ff4d00;
            --orange-g: rgba(255, 77, 0, 0.35);
            --text: #eaeaea;
            --muted: #6a6a7a;
            --glass: rgba(255, 255, 255, 0.06);
            --font-d: 'Orbitron', sans-serif;
            --font-m: 'JetBrains Mono', monospace
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0
        }

        html {
            scroll-behavior: smooth;
            overflow-x: hidden;
            width: 100%;
        }

        body {
            font-family: var(--font-m);
            background: var(--bg);
            color: var(--text);
            overflow-x: hidden;
            cursor: none;
            line-height: 1.6
        }

        body.redteam {
            --cyan: #ff0033;
            --cyan-g: rgba(255, 0, 51, 0.4);
            --orange: #ff0033;
            --orange-g: rgba(255, 0, 51, 0.4)
        }

        #void {
            position: fixed;
            inset: 0;
            z-index: 0;
            pointer-events: none
        }

        .cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            border: 2px solid var(--cyan);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            transition: width .15s, height .15s, border-color .15s;
            mix-blend-mode: difference
        }

        .cursor::after {
            content: '';
            position: absolute;
            inset: 7px;
            background: var(--cyan);
            border-radius: 50%
        }

        .cursor.hover {
            width: 50px;
            height: 50px;
            border-color: var(--orange)
        }

        .boot {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: var(--bg);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity .4s, visibility .4s
        }

        .boot.off {
            opacity: 0;
            visibility: hidden;
            pointer-events: none
        }

        .boot-txt {
            font-family: var(--font-m);
            font-size: clamp(1rem, 2.5vw, 1.4rem);
            color: var(--cyan);
            text-shadow: 0 0 20px var(--cyan-g)
        }

        main {
            position: relative;
            z-index: 1;
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px
        }

        .glass {
            background: var(--bg-card);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass);
            border-radius: 14px;
            padding: 35px;
            margin-bottom: 35px;
            position: relative;
            overflow: hidden
        }

        .glass::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
            opacity: .03;
            pointer-events: none
        }

        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 80px 20px
        }

        /* Cinematic Grain Overlay */
        .grain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9998;
            opacity: 0.025;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            animation: grainAnim 8s steps(10) infinite;
        }

        @keyframes grainAnim {

            0%,
            100% {
                transform: translate(0, 0);
            }

            10% {
                transform: translate(-5%, -5%);
            }

            20% {
                transform: translate(-10%, 5%);
            }

            30% {
                transform: translate(5%, -10%);
            }

            40% {
                transform: translate(-5%, 15%);
            }

            50% {
                transform: translate(-10%, 5%);
            }

            60% {
                transform: translate(15%, 0);
            }

            70% {
                transform: translate(0, 10%);
            }

            80% {
                transform: translate(-15%, 0);
            }

            90% {
                transform: translate(10%, 5%);
            }
        }

        /* Scramble Text Effect Class */
        .scramble-hover {
            display: inline-block;
            cursor: default;
        }

        .avatar {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            padding: 3px;
            background: conic-gradient(from 0deg, var(--cyan), var(--orange), var(--cyan));
            animation: spin 6s linear infinite;
            box-shadow: 0 0 50px var(--cyan-g);
            position: relative;
            overflow: visible;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .avatar.pressed {
            transform: scale(0.92);
            box-shadow: 0 0 80px var(--cyan-g), inset 0 0 20px rgba(0, 243, 255, 0.3);
        }

        .avatar.pulse-tap {
            animation: tapPulse 0.15s ease-out;
        }

        @keyframes tapPulse {
            0% {
                transform: scale(1);
                box-shadow: 0 0 50px var(--cyan-g);
            }

            50% {
                transform: scale(0.95);
                box-shadow: 0 0 70px var(--cyan-g), 0 0 100px var(--cyan);
            }

            100% {
                transform: scale(1);
                box-shadow: 0 0 50px var(--cyan-g);
            }
        }

        .avatar img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            background: var(--bg)
        }

        /* GLITCH EFFECT FOR RED TEAM ACTIVATION */
        .avatar.glitch-active {
            animation: avatarGlitch 0.5s steps(1) forwards;
        }

        .avatar.glitch-active::before,
        .avatar.glitch-active::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: inherit;
            pointer-events: none;
        }

        .avatar.glitch-active::before {
            animation: chromaShiftR 0.5s steps(2) infinite;
            mix-blend-mode: screen;
            opacity: 0.8;
        }

        .avatar.glitch-active::after {
            animation: chromaShiftB 0.5s steps(2) infinite;
            mix-blend-mode: screen;
            opacity: 0.8;
        }

        @keyframes avatarGlitch {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }

            5% {
                transform: translate(-15px, 5px) scale(1.02);
                opacity: 0.8;
            }

            10% {
                transform: translate(10px, -8px) scale(0.98);
                opacity: 0.6;
            }

            15% {
                transform: translate(-8px, 12px) scale(1.05);
                opacity: 0.9;
            }

            20% {
                transform: translate(12px, -5px) scale(0.95);
                opacity: 0.4;
            }

            25% {
                transform: translate(-5px, -10px) scale(1.03);
                opacity: 1;
            }

            30% {
                transform: translate(8px, 8px) scale(0.97);
                opacity: 0.5;
            }

            35% {
                transform: translate(-12px, -3px) scale(1.04);
                opacity: 0.7;
            }

            40% {
                transform: translate(5px, 10px) scale(0.96);
                opacity: 0.3;
            }

            45% {
                transform: translate(-10px, 5px) scale(1.02);
                opacity: 0.9;
            }

            50% {
                transform: translate(15px, -12px) scale(0.98);
                opacity: 0.6;
            }

            55% {
                transform: translate(-3px, 8px) scale(1.01);
                opacity: 0.8;
            }

            60% {
                transform: translate(7px, -7px) scale(0.99);
                opacity: 0.4;
            }

            65% {
                transform: translate(-8px, 3px) scale(1.03);
                opacity: 1;
            }

            70% {
                transform: translate(10px, 10px) scale(0.97);
                opacity: 0.5;
            }

            75% {
                transform: translate(-5px, -8px) scale(1.02);
                opacity: 0.7;
            }

            80% {
                transform: translate(3px, 5px) scale(0.98);
                opacity: 0.9;
            }

            85% {
                transform: translate(-7px, -5px) scale(1.01);
                opacity: 0.6;
            }

            90% {
                transform: translate(5px, 3px) scale(0.99);
                opacity: 0.8;
            }

            95% {
                transform: translate(-2px, -2px) scale(1);
                opacity: 0.9;
            }

            100% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
        }

        @keyframes chromaShiftR {

            0%,
            100% {
                transform: translate(3px, 0);
                box-shadow: inset 0 0 30px rgba(255, 0, 0, 0.8);
            }

            25% {
                transform: translate(-5px, 2px);
                box-shadow: inset 0 0 50px rgba(255, 0, 0, 1);
            }

            50% {
                transform: translate(4px, -3px);
                box-shadow: inset 0 0 20px rgba(255, 0, 0, 0.6);
            }

            75% {
                transform: translate(-3px, 1px);
                box-shadow: inset 0 0 40px rgba(255, 0, 0, 0.9);
            }
        }

        @keyframes chromaShiftB {

            0%,
            100% {
                transform: translate(-3px, 0);
                box-shadow: inset 0 0 30px rgba(0, 100, 255, 0.8);
            }

            25% {
                transform: translate(5px, -2px);
                box-shadow: inset 0 0 50px rgba(0, 100, 255, 1);
            }

            50% {
                transform: translate(-4px, 3px);
                box-shadow: inset 0 0 20px rgba(0, 100, 255, 0.6);
            }

            75% {
                transform: translate(3px, -1px);
                box-shadow: inset 0 0 40px rgba(0, 100, 255, 0.9);
            }
        }

        /* Screen flash effect */
        .screen-flash {
            position: fixed;
            inset: 0;
            background: #ff0033;
            z-index: 19999;
            opacity: 0;
            pointer-events: none;
            animation: screenFlash 0.5s ease-out forwards;
        }

        @keyframes screenFlash {
            0% {
                opacity: 0.8;
            }

            20% {
                opacity: 0.3;
            }

            40% {
                opacity: 0.6;
            }

            60% {
                opacity: 0.1;
            }

            80% {
                opacity: 0.4;
            }

            100% {
                opacity: 0;
            }
        }

        @keyframes spin {
            to {
                --angle: 360deg
            }
        }

        .glitch {
            font-family: var(--font-d);
            font-size: clamp(2.2rem, 7vw, 4.5rem);
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: .08em;
            color: var(--text);
            margin: 30px 0 15px;
            position: relative
        }

        .glitch::before,
        .glitch::after {
            content: attr(data-text);
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            opacity: .8
        }

        .glitch::before {
            animation: glitch1 2.5s infinite;
            color: var(--cyan);
            clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%)
        }

        .glitch::after {
            animation: glitch2 2.5s infinite;
            color: var(--orange);
            clip-path: polygon(0 55%, 100% 55%, 100% 100%, 0 100%)
        }

        @keyframes glitch1 {

            0%,
            100% {
                transform: translate(0)
            }

            20% {
                transform: translate(-3px, 2px)
            }

            40% {
                transform: translate(3px, -2px)
            }

            60% {
                transform: translate(-2px, 1px)
            }

            80% {
                transform: translate(2px, -1px)
            }
        }

        @keyframes glitch2 {

            0%,
            100% {
                transform: translate(0)
            }

            25% {
                transform: translate(3px, -2px)
            }

            50% {
                transform: translate(-3px, 2px)
            }

            75% {
                transform: translate(2px, -1px)
            }
        }

        .sub {
            font-size: clamp(.9rem, 2vw, 1.3rem);
            color: var(--cyan);
            text-transform: uppercase;
            letter-spacing: .25em;
            margin-bottom: 25px
        }

        .bio {
            max-width: 650px;
            color: var(--muted);
            font-size: 1rem;
            margin-bottom: 35px
        }

        .links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 22px;
            background: transparent;
            border: 1px solid var(--cyan);
            color: var(--cyan);
            text-decoration: none;
            font-family: var(--font-m);
            font-size: .85rem;
            text-transform: uppercase;
            letter-spacing: .1em;
            transition: all .25s;
            position: relative;
            overflow: hidden
        }

        .btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--cyan);
            transform: scaleX(0);
            transform-origin: right;
            transition: transform .3s
        }

        .btn:hover::before {
            transform: scaleX(1);
            transform-origin: left
        }

        .btn:hover {
            color: var(--bg);
            box-shadow: 0 0 25px var(--cyan-g)
        }

        .btn span {
            position: relative;
            z-index: 1
        }

        .sec-h {
            font-family: var(--font-d);
            font-size: clamp(1.3rem, 3.5vw, 2rem);
            color: var(--cyan);
            text-transform: uppercase;
            letter-spacing: .15em;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px
        }

        .sec-h::before {
            content: '//';
            color: var(--orange)
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px
        }

        .skill {
            background: rgba(0, 243, 255, .04);
            border: 1px solid var(--glass);
            border-radius: 10px;
            padding: 22px 15px;
            text-align: center;
            transition: all .25s;
            position: relative
        }

        .skill:hover {
            border-color: var(--cyan);
            transform: translateY(-4px);
            box-shadow: 0 8px 30px var(--cyan-g)
        }

        .skill span {
            font-size: .9rem;
            font-weight: 500
        }

        .projects {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px
        }

        /* ========== HOLOGRAPHIC CARDS (2026) ========== */
        .card {
            background: rgba(10, 10, 10, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
            transition: transform 0.1s ease-out, box-shadow 0.3s ease;
            transform-style: preserve-3d;
            will-change: transform;
            backdrop-filter: blur(10px);
        }

        /* Dynamic Spotlight (controlled by JS --x, --y) */
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 16px;
            padding: 1.5px;
            background: radial-gradient(800px circle at var(--x, 0px) var(--y, 0px),
                    rgba(0, 243, 255, 0.4),
                    transparent 40%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.5s ease;
            z-index: 2;
        }

        .grid:hover .card::before {
            opacity: 1;
        }

        /* Inner Sheen */
        .card::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(600px circle at var(--x, 0px) var(--y, 0px),
                    rgba(255, 255, 255, 0.06),
                    transparent 40%);
            pointer-events: none;
            z-index: 1;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .card:hover::after {
            opacity: 1;
        }

        .card content-wrapper {
            transform: translateZ(20px);
        }

        .card h3 {
            font-family: var(--font-d);
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transform: translateZ(20px);
            text-shadow: 0 0 10px rgba(0, 243, 255, 0.3);
        }

        .card .classified {
            font-size: 0.65rem;
            color: var(--orange);
            border: 1px solid var(--orange);
            padding: 2px 6px;
            border-radius: 4px;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.8;
            background: rgba(255, 77, 0, 0.1);
            transform: translateZ(15px);
        }

        .card .lang {
            font-size: 0.75rem;
            color: var(--cyan);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 1rem;
            font-weight: 700;
            transform: translateZ(15px);
            display: block;
        }

        .card p {
            color: var(--muted);
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            transform: translateZ(10px);
        }

        .card a {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--cyan);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            transform: translateZ(25px);
            padding: 8px 16px;
            border: 1px solid rgba(0, 243, 255, 0.2);
            border-radius: 4px;
            background: rgba(0, 243, 255, 0.05);
        }

        .card a:hover {
            background: rgba(0, 243, 255, 0.15);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.4);
            transform: translateZ(30px) translateY(-2px);
        }



        /* CUSTOM BUTTON STYLES */
        /* CS0724 - Education (Green/Cyan) */
        .btn-edu {
            border-color: #00ff88 !important;
            color: #00ff88 !important;
            background: rgba(0, 255, 136, 0.05) !important;
        }

        .btn-edu:hover {
            background: rgba(0, 255, 136, 0.15) !important;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.4) !important;
        }

        /* DarkCore - Rust (Orange) */
        .btn-rust {
            border-color: #ff4d00 !important;
            color: #ff4d00 !important;
            background: rgba(255, 77, 0, 0.05) !important;
        }

        .btn-rust:hover {
            background: rgba(255, 77, 0, 0.15) !important;
            box-shadow: 0 0 15px rgba(255, 77, 0, 0.4) !important;
        }

        /* INSTAFollows - OSINT (Purple/Pink) */
        .btn-osint {
            border-color: #ff00ff !important;
            color: #ff00ff !important;
            background: rgba(255, 0, 255, 0.05) !important;
        }

        .btn-osint:hover {
            background: rgba(255, 0, 255, 0.15) !important;
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.4) !important;
        }

        /* INSTASTREAM - Broadcast (Cyan/Blue) */
        .btn-stream {
            border-color: #0088ff !important;
            color: #0088ff !important;
            background: rgba(0, 136, 255, 0.05) !important;
        }

        .btn-stream:hover {
            background: rgba(0, 136, 255, 0.15) !important;
            box-shadow: 0 0 15px rgba(0, 136, 255, 0.4) !important;
        }

        /* Calcologas - Flux (Yellow/Toxic) */
        .btn-flux {
            border-color: #ccff00 !important;
            color: #ccff00 !important;
            background: rgba(204, 255, 0, 0.05) !important;
        }

        .btn-flux:hover {
            background: rgba(204, 255, 0, 0.15) !important;
            box-shadow: 0 0 15px rgba(204, 255, 0, 0.4) !important;
            color: #fff !important;
        }

        /* Projects-TO-LLMs - AI (Neural Purple) */
        .btn-ai {
            border-color: #8a2be2 !important;
            color: #8a2be2 !important;
            background: rgba(138, 43, 226, 0.05) !important;
        }

        .btn-ai:hover {
            background: rgba(138, 43, 226, 0.15) !important;
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.4) !important;
            color: #fff !important;
        }

        /* Red Team Override */
        body.redteam .card {
            border-color: rgba(255, 0, 0, 0.2);
            background: rgba(20, 0, 0, 0.6);
        }

        body.redteam .card::before {
            background: radial-gradient(800px circle at var(--x, 0px) var(--y, 0px),
                    rgba(255, 50, 50, 0.6),
                    transparent 40%);
        }

        body.redteam .card h3 {
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
        }

        body.redteam .card a {
            color: #ff3333;
            border-color: rgba(255, 50, 50, 0.3);
            background: rgba(255, 0, 0, 0.1);
        }

        .cli {
            background: rgba(0, 0, 0, .85);
            border: 1px solid var(--cyan);
            border-radius: 10px;
            padding: 25px;
            margin-top: 50px
        }

        .cli-bar {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 18px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--glass)
        }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%
        }

        .dot.r {
            background: #ff5f56
        }

        .dot.y {
            background: #ffbd2e
        }

        .dot.g {
            background: #27ca40
        }

        .cli-title {
            font-size: .75rem;
            color: var(--muted);
            margin-left: 10px
        }

        .cli-out {
            font-size: .85rem;
            color: var(--muted);
            min-height: 50px;
            white-space: pre-wrap;
            margin-bottom: 12px
        }

        .cli-out .ok {
            color: var(--cyan)
        }

        .cli-out .warn {
            color: var(--orange)
        }

        .cli-in {
            display: flex;
            align-items: center;
            gap: 10px
        }

        .cli-in span {
            color: var(--cyan);
            white-space: nowrap
        }

        .cli-in input {
            flex: 1;
            background: 0;
            border: 0;
            outline: 0;
            color: var(--text);
            font-family: var(--font-m);
            font-size: .9rem
        }

        .reveal {
            opacity: 0;
            transform: translateY(35px);
            transition: opacity .6s, transform .6s
        }

        .reveal.vis {
            opacity: 1;
            transform: translateY(0)
        }

        .alert {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, .95);
            border: 2px solid #ff0033;
            padding: 40px 60px;
            text-align: center;
            z-index: 20000;
            display: none;
            animation: pulse 1s infinite
        }

        .alert.show {
            display: block
        }

        .alert h2 {
            color: #ff0033;
            font-family: var(--font-d);
            font-size: 1.8rem;
            margin-bottom: 10px
        }

        .alert p {
            color: #ff0033;
            font-size: 1rem
        }

        @keyframes pulse {

            0%,
            100% {
                box-shadow: 0 0 20px #ff0033
            }

            50% {
                box-shadow: 0 0 60px #ff0033
            }
        }

        /* SHADOW HINT POPUP */
        .hint-popup {
            position: fixed;
            bottom: 30px;
            right: -400px;
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 12px;
            padding: 18px 24px;
            display: flex;
            align-items: center;
            gap: 14px;
            z-index: 15000;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5), 0 0 20px rgba(0, 243, 255, 0.1);
            transition: right 0.5s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.3s;
            max-width: 340px;
            cursor: pointer;
            text-decoration: none;
        }

        .hint-popup:hover {
            border-color: var(--cyan);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5), 0 0 30px rgba(0, 243, 255, 0.3);
        }

        .hint-popup.show {
            right: 30px;
        }

        .hint-popup .hint-icon {
            font-size: 1.5rem;
            filter: drop-shadow(0 0 8px var(--cyan));
        }

        .hint-popup .hint-text {
            font-family: var(--font-m);
            font-size: 0.8rem;
            color: var(--cyan);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            line-height: 1.5;
        }

        .hint-popup .hint-text strong {
            color: var(--orange);
            font-weight: 600;
        }

        /* RESET BUTTON */
        .reset-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 0, 51, 0.2);
            border: 1px solid #ff0033;
            color: #ff0033;
            padding: 10px 18px;
            border-radius: 8px;
            font-family: var(--font-m);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            cursor: pointer;
            z-index: 10001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .reset-btn.show {
            opacity: 1;
            visibility: visible;
        }

        .reset-btn:hover {
            background: rgba(255, 0, 51, 0.4);
            box-shadow: 0 0 20px rgba(255, 0, 51, 0.5);
        }

        /* CRACK GAME OVERLAY */
        .crack-game {
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid var(--cyan);
            padding: 20px;
            margin: 10px 0;
            font-family: var(--font-m);
        }

        .crack-bar {
            font-size: 1.2rem;
            letter-spacing: 0.1em;
        }

        .crack-bar .cursor {
            color: #ff0;
            font-weight: bold;
        }

        .crack-bar .sweet-spot {
            color: #0f0;
        }

        @media(max-width:768px) {
            .glass {
                padding: 22px
            }

            .hero {
                padding: 50px 15px
            }

            .avatar {
                width: 120px;
                height: 120px
            }

            .grid {
                grid-template-columns: repeat(2, 1fr)
            }

            .projects {
                grid-template-columns: 1fr
            }

            body {
                cursor: auto
            }

            .cursor {
                display: none
            }
        }

        /* LANGUAGE TOGGLE */
        .lang-toggle {
            position: fixed;
            top: 20px;
            right: 150px;
            /* Positioned to the left of Reset Button */
            background: rgba(10, 10, 15, 0.8);
            border: 1px solid var(--cyan);
            color: var(--muted);
            padding: 8px 14px;
            border-radius: 6px;
            font-family: var(--font-m);
            font-size: 0.75rem;
            cursor: pointer;
            z-index: 10002;
            transition: all 0.3s;
            display: flex;
            gap: 8px;
            backdrop-filter: blur(4px);
        }

        .lang-toggle:hover {
            background: rgba(0, 243, 255, 0.1);
            box-shadow: 0 0 15px var(--cyan-g);
            border-color: #fff;
        }

        .lang-toggle .active {
            color: var(--cyan);
            font-weight: 700;
            text-shadow: 0 0 8px var(--cyan);
        }

        .lang-toggle .dim {
            color: var(--muted);
            opacity: 0.4;
        }
    </style>
</head>

<body>
    <div class="boot" id="boot">
        <div class="boot-txt" id="bootTxt">DARKCORE://INIT</div>
    </div>
    <div class="cursor" id="cur"></div>
    <div class="alert" id="alert">
        <h2>‚ö† ROOT ACCESS GRANTED</h2>
        <p>DARKCORE PROTOCOL ACTIVE</p>
    </div>
    <!-- SHADOW HINT POPUP -->
    <a href="https://www.google.com/search?q=konami+cheat+code" target="_blank" rel="noopener" class="hint-popup"
        id="hintPopup">
        <span class="hint-icon">üîê</span>
        <span class="hint-text"><strong>ACCESS RESTRICTED.</strong><br>KONAMI PROTOCOL REQUIRED.</span>
    </a>
    <!-- RESET BUTTON (Returns to Blue Mode) -->
    <button class="reset-btn" id="resetBtn" onclick="resetToBlueMode()">‚ü≤ EXIT RED TEAM</button>
    <canvas id="void"></canvas>
    <main>
        <section class="hero">
            <div class="avatar reveal" id="avatarContainer"><img id="profileImg" src="foto_profilo.png"
                    alt="Sebastiano Gelmetti"></div>
            <h1 class="glitch reveal" data-text="Sebastiano Gelmetti" id="name">Sebastiano Gelmetti</h1>
            <p class="sub reveal">SOC Analyst | Blue Team Specialist</p>
            <p class="bio reveal">Defending critical infrastructure through proactive threat hunting and secure
                architecture. Blending operational leadership with technical precision.</p>
            <div class="links reveal">
                <a href="https://github.com/hkmodd" class="btn magnetic" target="_blank"><span>‚ü®/‚ü© GitHub</span></a>
                <a href="https://www.linkedin.com/in/gelmetti-sebastiano/" class="btn magnetic" target="_blank"><span>in
                        LinkedIn</span></a>
                <a href="CV_Sebastiano_Gelmetti.pdf" class="btn magnetic" download><span>‚Üì CV</span></a>
            </div>
        </section>
        <section class="glass reveal">
            <h2 class="sec-h">Arsenal</h2>
            <div class="grid">
                <div class="skill magnetic"><span>Rust</span></div>
                <div class="skill magnetic"><span>Python</span></div>
                <div class="skill magnetic"><span>TypeScript</span></div>
                <div class="skill magnetic"><span>Splunk</span></div>
                <div class="skill magnetic"><span>SIEM</span></div>
                <div class="skill magnetic"><span>Wireshark</span></div>
                <div class="skill magnetic"><span>Threat Intel</span></div>
                <div class="skill magnetic"><span>Incident Response</span></div>
            </div>
        </section>
        <section class="glass reveal">
            <h2 class="sec-h">Operations</h2>
            <div class="projects">
                <!-- Projects-TO-LLMs -->
                <div class="card magnetic">
                    <h3><span>Projects-TO-LLMs</span></h3>
                    <div class="lang">RUST / TAURI / AI</div>
                    <p>Rust + Tauri tool converting full codebases into structured XML context for LLMs.</p>
                    <a href="https://github.com/hkmodd/Projects-TO-LLMs" target="_blank" class="btn-ai"><span>View
                            Context Tool ‚Üí</span></a>
                </div>

                <!-- CS0724IT -->
                <div class="card magnetic">
                    <h3><span>CS0724IT</span>
                        <div class="classified">BOOTCAMP</div>
                    </h3>
                    <div class="lang">PYTHON / CYBERSECURITY</div>
                    <p>Epicode Cybersecurity Specialist Bootcamp. Advanced network defense, penetration testing
                        methodologies, and Python automation scripts.</p>
                    <a href="https://github.com/hkmodd/CS0724IT" target="_blank" class="btn-edu"><span>View Bootcamp
                            ‚Üí</span></a>
                </div>

                <!-- DarkCore-Manager -->
                <div class="card magnetic">
                    <h3><span>DarkCore-Manager</span></h3>
                    <div class="lang">RUST / SYSTEM</div>
                    <p>High-performance orchestration tool for Steam layers. Rust-native memory safety, VDF
                        virtualization, and advanced local library management.</p>
                    <a href="https://github.com/hkmodd/DarkCore-Manager" target="_blank" class="btn-rust"><span>View
                            System Core ‚Üí</span></a>
                </div>

                <!-- INSTAFollows-Ultimate -->
                <div class="card magnetic">
                    <h3><span>INSTAFollows-Ult.</span></h3>
                    <div class="lang">RUST + TAURI</div>
                    <p>Elite OSINT & Surveillance Tool. Stealth surveillance, traitor detection & mass management with
                        100% local privacy architecture.</p>
                    <a href="https://github.com/hkmodd/INSTAFollows-Ultimate" target="_blank"
                        class="btn-osint"><span>View Surveillance ‚Üí</span></a>
                </div>

                <!-- INSTASTREAM-Ultimate -->
                <div class="card magnetic">
                    <h3><span>INSTASTREAM-Ult.</span></h3>
                    <div class="lang">RUST + RTMP</div>
                    <p>Next-gen Instagram Live broadcast tool. Secure cookies.json auth, auto-key negotiation, and
                        cyberpunk glassmorphism UI.</p>
                    <a href="https://github.com/hkmodd/INSTASTREAM-Ultimate" target="_blank"
                        class="btn-stream"><span>View Broadcast ‚Üí</span></a>
                </div>

                <!-- Calcologas -->
                <div class="card magnetic">
                    <h3><span>Calcologas</span></h3>
                    <div class="lang">TYPESCRIPT / MEME</div>
                    <p>Meme Premium gas bill calculator. Fallout-style aesthetics, cinematic effects, and synthesized
                        sound engine. Made for grandpa.</p>
                    <a href="https://github.com/hkmodd/Calcologas" target="_blank" class="btn-flux"><span>View Anomaly
                            ‚Üí</span></a>
                </div>
            </div>
        </section>

        <!-- IDENTITY RECORD (Psychological Profile) -->
        <section class="glass reveal profile-dossier">
            <h2 class="sec-h">Identity Record <span class="blink">_</span></h2>
            <div class="dossier-grid">
                <div class="dossier-card">
                    <div class="dossier-header">
                        <span class="icon">ROOT ACCESS // ORIGIN</span>
                    </div>
                    <h3>The Hacker Mindset</h3>
                    <p>Non sono nato in un'aula. La mia curiosit√† √® iniziata smontando firmware e aggirando protezioni
                        hardware (Xbox/XGD3) per capire <em>come</em> funzionano le cose. Questo background da
                        autodidatta nel Reverse Engineering mi d√† un vantaggio tattico: <strong>penso come
                            l'attaccante.</strong></p>
                </div>

                <div class="dossier-card">
                    <div class="dossier-header">
                        <span class="icon">PROTOCOL // EVOLUTION</span>
                    </div>
                    <h3>Cybersecurity Specialist</h3>
                    <p>Certificato <strong>Epicode (+600h)</strong>. Ho trasformato la passione in metodologia offensiva
                        e difensiva. Dal Penetration Testing all'Hardening di sistemi Linux/Windows. Non eseguo solo
                        tool, analizzo i vettori di attacco e mitigo le vulnerabilit√† critiche (OWASP Top 10).</p>
                </div>

                <div class="dossier-card full-width">
                    <div class="dossier-header">
                        <span class="icon">HUMAN INTEL // LEADERSHIP</span>
                    </div>
                    <h3>Operational Integrity</h3>
                    <p>3+ anni di gestione Team in ambienti ad alta pressione (Hospitality Management). So coordinare
                        risorse sotto stress, prendere decisioni critiche in tempo reale e mantenere l'integrit√†
                        operativa. Un SOC Analyst con la <strong>freddezza gestionale</strong> di un Team Leader.</p>
                </div>
            </div>
        </section>

        <!-- CSS for Dossier -->
        <style>
            .dossier-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 25px;
            }

            .dossier-card {
                background: rgba(0, 20, 20, 0.6);
                border: 1px solid rgba(0, 243, 255, 0.1);
                padding: 25px;
                border-radius: 4px;
                position: relative;
                transition: all 0.3s ease;
            }

            .dossier-card:hover {
                border-color: var(--cyan);
                background: rgba(0, 243, 255, 0.05);
                box-shadow: 0 0 20px rgba(0, 243, 255, 0.1);
            }

            .dossier-card.full-width {
                grid-column: 1 / -1;
                border: 1px solid rgba(255, 77, 0, 0.2);
                background: rgba(20, 10, 0, 0.4);
            }

            .dossier-card.full-width:hover {
                border-color: var(--orange);
                background: rgba(255, 77, 0, 0.05);
                box-shadow: 0 0 20px rgba(255, 77, 0, 0.1);
            }

            .dossier-header {
                display: flex;
                justify-content: space-between;
                margin-bottom: 15px;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                padding-bottom: 8px;
            }

            .dossier-header .icon {
                font-family: var(--font-m);
                font-size: 0.75rem;
                color: var(--muted);
                letter-spacing: 2px;
            }

            .dossier-card h3 {
                color: var(--white);
                font-family: var(--font-d);
                font-size: 1.2rem;
                margin-bottom: 15px;
            }

            .dossier-card p {
                color: var(--muted);
                font-size: 0.95rem;
                line-height: 1.6;
            }

            .dossier-card strong {
                color: var(--cyan);
            }

            .dossier-card.full-width strong {
                color: var(--orange);
            }

            @media(max-width: 768px) {

                /* FORCE SINGLE COLUMN FOR DOSSIER */
                .dossier-grid {
                    grid-template-columns: 1fr !important;
                }

                /* ADJUST PADDING TO PREVENT OVERFLOW */
                .glass,
                .dossier-card {
                    padding: 18px !important;
                }

                .hero {
                    padding: 40px 15px !important;
                }

                /* SAFEGUARD TERMINAL */
                .cli {
                    overflow-x: auto;
                }

                /* ADJUST LANG TOGGLE POSITION */
                .lang-toggle {
                    right: 20px;
                    top: 15px;
                }

                /* PREVENT OVERLAP WITH RESET BTN */
                .reset-btn {
                    top: 60px;
                    right: 20px;
                    padding: 8px 12px;
                }
            }
        </style>

        <div class="cli reveal">
            <div class="cli-bar"><span class="dot r"></span><span class="dot y"></span><span class="dot g"></span><span
                    class="cli-title">darkcore@terminal</span></div>
            <div class="cli-out" id="out">Type <span class="ok">'help'</span> for commands...</div>
            <div class="cli-in"><span id="promptSpan">hkmodd@darkcore:~$</span><input type="text" id="in"
                    autocomplete="off" spellcheck="false"></div>
        </div>
    </main>
    <script>
        (() => {
            // ========== AUDIO ENGINE (Base64 Embedded SFX) ==========
            // Digital Thunder Crack / Security Breach SFX (synthesized, ~1.2s)
            const sfxTriggerData = 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YVoGAACAf4B/gICAgH5+f35/f4CAgICBgoKDhIWHiYuOkZSYnKCkqKyvsrW4u77BxMbJy87Q0tTV1tfX2NjY2NjY19fW1dTT0dDOzMrIxsO/u7eyrqmloJyXko6JhYF+endzb2xpZmNgXltYVlNQTkxKR0VDQkA/PT07Ojk4Nzc2NjY2Njc3ODk6Ojs8PT4/QEJDREVHSU1PUVNWV1pcX2FjZmhrbW9xc3V3eXt+gICChYaIi42PkZOVl5qbnZ+goqOkpaanp6ioqaiqqqurq6ysra2urrCwsbKztLW3uLm7vL6/wMHDxMXGx8jJysvMzc7O0NHS0tTV1dbX2NjZ2tvc3d7f4OHi4+Tl5ufn5+fo6eno6Ojn5+fm5uXk4+Lh39/e3dzb2tnX1tTT0dDOzcvKyMfFxMPBwL68u7q4t7a1s7Kwr66ta2lnZWNiYF9dXFtaWFlYWFdXV1dXWVlaW1xcXV5fYGJjZGVnaGlrbG5vcHJzdXZ4eXt9f4CChIWHiYqMjpCRk5SWl5mam5ydnp+goaKio6Slpqanp6ioqamqqqqrq6usra6ur7CxsbK0tLW2t7i5u7y9vr/BwcLDxMXGx8jJysvMzc3Oz9DR0dLT09TU1dXW1tfX2NjZ2dna2trb29vb29vb29va2trZ2dnY2NfX1tbV1NTT09LR0dDPzs7NzMvKycjHxsTDwcC/vry7urm3trWzsrGwr66sqqqop6WkoqGfnpybmpmXlpSSkZCOjIuKiIeGhIOCgYB+fn18e3p5eXh4d3Z2dXV1dHR0c3NzdHR0dHV1dnd4eXl6e3x9fn+AgYKDhIWGh4iJiouMjY6PkJGSk5SVlpeYmZqbnJ2en6ChoqOkpKWmp6eoqamqq6utra6vsLGys7S1tre4ubu8vb6/wMHDxMXGx8jJysrLzM3Oz9DR0tLT1NTU1dXW1tbW1tbW1tbV1dXV1NTU09PS0tHR0M/OzczLysnIx8XEw8HAvry7urm3trWzsrCvrqyqqKempKKhn52bmZiWlJKRj42Mi4mHhoWDgoGAf319fHt6enl4eHd3dnZ1dXR0dHNzc3NzdHR0dXV2d3d4eXl6e3x9foCAgYKDhIaHiImKi42Oj5CRkpOUlZaXmJmam5ydn6ChoqOkpaanqKmqq6usra6vsLGys7S1t7i5uru9vr/AwcLDxMXGx8jJysvMzM3Oz9DR0dLT09TU1dXW1tbW1tbX19fX19fX19fX19fX19bW1tbV1dXU1NPT0tLR0M/Ozc3My8rJyMfFxMPBwL++vbu6ubm3trW0s7KxsK+urq2srKyrrKytrq6vsLGys7S1tre4ubq7vL2+v8DBwsPExcbHyMjJysvLzM3Nzs7P0NDR0dHS0tPT1NTU1NXV1dXV1dXV1dXV1dXU1NTU09PT0tLS0dHQ0M/PzsA=';

            // Dystopian Drone Ambiance (low frequency loop, ~2s loopable)
            const sfxAmbianceData = 'data:audio/wav;base64,UklGRnoEAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YVoEAAB/f39/f39/f39/f39/fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn19fX19fX19fX19fX19fX19fX19fXx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx9fX19fX19fX19fX19fX19fX19fX19fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5/f39/f39/f39/f39/f39/f39/gICAgICAgICAgICAgICAgICAgICAgICAgIGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4SEhISEhISEhISEhISEhISEhISEhISEhISEhISEhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4yMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2Ojo6Ojo6Ojo6Ojo6Oj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pjo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6OjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjYyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhISEhISEhISEhISEhISEhISEhISEhISEhISEhISE';

            let sfxTrigger, sfxAmbiance;

            function initAudio() {
                sfxTrigger = new Audio(sfxTriggerData);
                sfxTrigger.volume = 0.7;
                sfxAmbiance = new Audio(sfxAmbianceData);
                sfxAmbiance.volume = 0.15;
                sfxAmbiance.loop = true;
            }

            // ========== FLOW FIELD CANVAS ==========
            const C = document.getElementById('void'), X = C.getContext('2d');
            let W, H, particles = [], mouse = { x: null, y: null }, field = [], cols, rows, redteam = false, speedMult = 1;

            const CELL = 20, COUNT = 250;

            function resize() { W = C.width = innerWidth; H = C.height = innerHeight; cols = Math.ceil(W / CELL); rows = Math.ceil(H / CELL); initField() }
            function initField() { field = []; for (let y = 0; y < rows; y++)for (let x = 0; x < cols; x++) { const angle = noise(x * .05, y * .05) * Math.PI * 4; field.push({ x: x * CELL, y: y * CELL, angle }) } }
            function noise(x, y) { return (Math.sin(x * 12.9898 + y * 78.233) * 43758.5453) % 1 }

            class P {
                constructor() { this.x = Math.random() * W; this.y = Math.random() * H; this.speed = Math.random() * 1.5 + .5; this.life = Math.random() * 100 + 50 }
                update() {
                    const col = Math.floor(this.x / CELL), row = Math.floor(this.y / CELL), idx = row * cols + col;
                    if (field[idx]) {
                        let angle = field[idx].angle;
                        if (mouse.x) {
                            const dx = this.x - mouse.x, dy = this.y - mouse.y, dist = Math.sqrt(dx * dx + dy * dy);
                            if (dist < 200) { const force = (200 - dist) / 200; angle += Math.atan2(dy, dx) * force * .5 }
                        }
                        this.x += Math.cos(angle) * this.speed * speedMult; this.y += Math.sin(angle) * this.speed * speedMult
                    }
                    if (this.x < 0 || this.x > W || this.y < 0 || this.y > H || --this.life < 0) { this.x = Math.random() * W; this.y = Math.random() * H; this.life = Math.random() * 100 + 50 }
                }
                draw() {
                    const a = this.life / 150;
                    if (redteam) {
                        X.fillStyle = `rgba(255,0,51,${a})`;
                        X.fillRect(this.x, this.y, 2, 2);
                    } else {
                        X.fillStyle = `rgba(0,243,255,${a * 0.5})`;
                        X.fillRect(this.x, this.y, 1.2, 1.2);
                    }
                }
            }

            resize(); for (let i = 0; i < COUNT; i++)particles.push(new P);

            function animate() {
                X.fillStyle = 'rgba(5,5,5,0.2)';
                X.fillRect(0, 0, W, H);
                particles.forEach(p => { p.update(); p.draw() });
                requestAnimationFrame(animate)
            }
            animate();

            addEventListener('resize', resize);
            addEventListener('mousemove', e => { mouse.x = e.clientX; mouse.y = e.clientY; document.getElementById('cur').style.cssText = `left:${e.clientX}px;top:${e.clientY}px` });

            document.querySelectorAll('a,.btn,.skill,.card,input').forEach(el => { el.addEventListener('mouseenter', () => document.getElementById('cur').classList.add('hover')); el.addEventListener('mouseleave', () => document.getElementById('cur').classList.remove('hover')) });

            document.querySelectorAll('.magnetic').forEach(el => { el.addEventListener('mousemove', e => { const rect = el.getBoundingClientRect(), x = e.clientX - rect.left - rect.width / 2, y = e.clientY - rect.top - rect.height / 2; el.style.transform = `translate(${x * .15}px,${y * .15}px)` }); el.addEventListener('mouseleave', () => el.style.transform = '') });

            // ========== INTERNATIONALIZATION (I18N) ==========
            const translations = {
                en: {
                    role: "SOC Analyst | Blue Team Specialist",
                    bio: "Defending critical infrastructure through proactive threat hunting and secure architecture. Blending operational leadership with technical precision.",
                    links: { cv: "‚Üì Resume" },
                    sections: {
                        arsenal: "Arsenal",
                        operations: "Operations",
                        identity: "Identity Record"
                    },
                    dossier: {
                        hacker_title: "The Hacker Mindset",
                        hacker_text: "I wasn't born in a classroom. My curiosity started by dismantling firmware and bypassing hardware protections (Xbox/XGD3) to understand <em>how</em> things work. This self-taught background gives me a tactical edge: <strong>I think like the attacker.</strong>",
                        growth_title: "Cybersecurity Specialist",
                        growth_text: "<strong>Epicode Certified (+600h)</strong>. I transformed passion into offensive and defensive methodology. From Penetration Testing to Linux/Windows Hardening. I don't just run tools; I analyze attack vectors and mitigate critical vulnerabilities (OWASP Top 10).",
                        lead_title: "Operational Integrity",
                        lead_text: "3+ years of Team Management in high-pressure environments. I coordinate resources under stress, make critical decisions in real-time, and maintain operational integrity. A SOC Analyst with the <strong>managerial composure</strong> of a Team Leader."
                    },
                    projects: {
                        projects_to_llms: "Rust + Tauri tool converting full codebases into structured XML context for LLMs.",
                        cs0724: "Advanced network defense, penetration testing methodologies, and Python automation scripts.",
                        darkcore: "High-performance orchestration tool for Steam layers. Rust-native memory safety, VDF virtualization, and advanced local library management.",
                        instafollows: "Elite OSINT & Surveillance Tool. Stealth surveillance, traitor detection & mass management with 100% local privacy architecture.",
                        instastream: "Next-gen Instagram Live broadcast tool. Secure cookies.json auth, auto-key negotiation, and cyberpunk glassmorphism UI.",
                        calcologas: "Meme Premium gas bill calculator. Fallout-style aesthetics, cinematic effects, and synthesized sound engine. Made for grandpa."
                    },
                    terminal: {
                        boot: ['DARKCORE://INIT', 'LOADING PROTOCOLS...', 'DECRYPTING...', 'READY'],
                        role: "Role: Junior SOC Analyst | Blue Team Specialist",
                        status: "Status: OPERATIONAL",
                        mission: "Mission: Defending critical infrastructure through proactive threat hunting."
                    }
                },
                it: {
                    role: "SOC Analyst | Blue Team Specialist",
                    bio: "Protezione di infrastrutture critiche tramite threat hunting proattivo e architetture sicure. Unisco leadership operativa e precisione tecnica.",
                    links: { cv: "‚Üì CV" },
                    sections: {
                        arsenal: "Arsenale",
                        operations: "Operazioni",
                        identity: "Profilo Identit√†"
                    },
                    dossier: {
                        hacker_title: "The Hacker Mindset",
                        hacker_text: "Non sono nato in un'aula. La mia curiosit√† √® iniziata smontando firmware e aggirando protezioni hardware (Xbox/XGD3) per capire <em>come</em> funzionano le cose. Questo background da autodidatta nel Reverse Engineering mi d√† un vantaggio tattico: <strong>penso come l'attaccante.</strong>",
                        growth_title: "Cybersecurity Specialist",
                        growth_text: "Certificato <strong>Epicode (+600h)</strong>. Ho trasformato la passione in metodologia offensiva e difensiva. Dal Penetration Testing all'Hardening di sistemi Linux/Windows. Non eseguo solo tool, analizzo i vettori di attacco e mitigo le vulnerabilit√† critiche (OWASP Top 10).",
                        lead_title: "Operational Integrity",
                        lead_text: "3+ anni di gestione Team in ambienti ad alta pressione. So coordinare risorse sotto stress, prendere decisioni critiche in tempo reale e mantenere l'integrit√† operativa. Un SOC Analyst con la <strong>freddezza gestionale</strong> di un Team Leader."
                    },
                    projects: {
                        projects_to_llms: "Tool Rust + Tauri per trasformare intere codebase in XML strutturato per LLM.",
                        cs0724: "Bootcamp Specialistico in Cybersecurity. Difesa di rete avanzata, metodologie di penetration testing e automazione Python.",
                        darkcore: "Strumento di orchestrazione ad alte prestazioni per Steam. Sicurezza della memoria Rust-native, virtualizzazione VDF e gestione avanzata della libreria locale.",
                        instafollows: "Tool Elite OSINT & Sorveglianza. Monitoraggio stealth, rilevamento traditori e gestione di massa con architettura privacy 100% locale.",
                        instastream: "Tool Next-gen per dirette Instagram. Autenticazione sicura cookies.json, negoziazione auto-key e interfaccia cyberpunk glassmorphism.",
                        calcologas: "Calcolatore bollette gas Meme Premium. Estetica Fallout, effetti cinematici e motore sonoro sintetizzato. Fatto per il nonno."
                    },
                    terminal: {
                        boot: ['DARKCORE://INIT', 'CARICAMENTO PROTOCOLLI...', 'DECRITTAZIONE...', 'PRONTO'],
                        role: "Ruolo: Junior SOC Analyst | Blue Team Specialist",
                        status: "Stato: OPERATIVO",
                        mission: "Missione: Difendere infrastrutture critiche tramite threat hunting proattivo."
                    }
                }
            };

            class LanguageManager {
                constructor() {
                    this.lang = localStorage.getItem('hk_lang') || (navigator.language.startsWith('it') ? 'it' : 'en');
                    this.toggleBtn = document.createElement('button');
                    this.initToggle();
                    this.applyLanguage(this.lang);
                }

                initToggle() {
                    this.toggleBtn.className = 'lang-toggle magnetic';
                    // Insert into DOM (top right)
                    document.body.appendChild(this.toggleBtn);
                    this.updateBtnState();

                    this.toggleBtn.addEventListener('click', () => {
                        this.lang = this.lang === 'en' ? 'it' : 'en';
                        localStorage.setItem('hk_lang', this.lang);
                        this.applyLanguage(this.lang);
                        this.updateBtnState();
                        // Play sound if available
                        if (typeof sfxTrigger !== 'undefined' && sfxTrigger) {
                            sfxTrigger.currentTime = 0; sfxTrigger.play().catch(() => { });
                        }
                    });
                }

                updateBtnState() {
                    this.toggleBtn.innerHTML = this.lang === 'en'
                        ? '<span class="active">EN</span> <span class="dim">IT</span>'
                        : '<span class="dim">EN</span> <span class="active">IT</span>';
                }

                applyLanguage(lang) {
                    const t = translations[lang];

                    // Simple text replacements
                    document.querySelector('.sub.reveal').textContent = t.role;
                    document.querySelector('.bio.reveal').textContent = t.bio;

                    // Sections
                    document.querySelectorAll('.sec-h').forEach(el => {
                        if (el.textContent.includes('Arsenal') || el.textContent.includes('Arsenale')) el.innerHTML = `${t.sections.arsenal}`;
                        if (el.textContent.includes('Operations') || el.textContent.includes('Operazioni')) el.innerHTML = `${t.sections.operations}`;
                        if (el.textContent.includes('Identity') || el.textContent.includes('Profilo')) el.innerHTML = `${t.sections.identity} <span class="blink">_</span>`;
                    });

                    // Links
                    const cvLink = document.querySelector('a[href$="CV_Sebastiano_Gelmetti.pdf"] span');
                    if (cvLink) cvLink.textContent = t.links.cv;

                    // Identity Record (Dossier)
                    // We identify cards by index since they don't have IDs
                    const dossierCards = document.querySelectorAll('.dossier-card');
                    if (dossierCards.length >= 3) {
                        dossierCards[0].querySelector('h3').textContent = t.dossier.hacker_title;
                        dossierCards[0].querySelector('p').innerHTML = t.dossier.hacker_text;

                        dossierCards[1].querySelector('h3').textContent = t.dossier.growth_title;
                        dossierCards[1].querySelector('p').innerHTML = t.dossier.growth_text;

                        dossierCards[2].querySelector('h3').textContent = t.dossier.lead_title;
                        dossierCards[2].querySelector('p').innerHTML = t.dossier.lead_text;
                    }

                    // Projects (Operations)
                    // Identify by H3 content or order
                    const projects = document.querySelectorAll('.projects .card');
                    if (projects.length >= 6) {
                        // Projects-TO-LLMs (Index 0)
                        projects[0].querySelector('p').textContent = t.projects.projects_to_llms;
                        // CS0724 (Index 1)
                        projects[1].querySelector('p').textContent = t.projects.cs0724;
                        // DarkCore (Index 2)
                        projects[2].querySelector('p').textContent = t.projects.darkcore;
                        // INSTAFollows (Index 3)
                        projects[3].querySelector('p').textContent = t.projects.instafollows;
                        // INSTASTREAM (Index 4)
                        projects[4].querySelector('p').textContent = t.projects.instastream;
                        // Calcologas (Index 5)
                        projects[5].querySelector('p').textContent = t.projects.calcologas;
                    }

                    // Update Terminal Boot Messages (for next reload)
                    if (typeof bootMsgs !== 'undefined' && !document.body.classList.contains('redteam')) {
                        // bootMsgs is const, so we can't reassign, but we can mutate if logic allows. 
                        // Actually boot logic runs once. We just update the VFS.
                        if (typeof terminal !== 'undefined' && terminal && terminal.vfs) {
                            terminal.vfs['/home/hkmodd/bio.txt'].content = `SEBASTIANO GELMETTI
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
${t.terminal.role}
Location: Italy
${t.terminal.status}

${t.terminal.mission}

Contact: sebastiano.gelmetti@proton.me
GitHub: github.com/hkmodd
LinkedIn: linkedin.com/in/gelmetti-sebastiano`;
                        }
                    }
                }
            }

            // Init Language Manager


            // ========== BOOT SEQUENCE ==========

            const savedRedTeam = localStorage.getItem('darkcore_redteam') === 'true';
            // Determine language for boot
            const bootLang = localStorage.getItem('hk_lang') || (navigator.language.startsWith('it') ? 'it' : 'en');
            // Ensure translations are available
            const bootMsgs = savedRedTeam ?
                ['SYSTEM BREACH DETECTED', 'RESTORING SESSION...', 'RED TEAM: ACTIVE', 'WELCOME BACK, OPERATIVE'] :
                translations[bootLang].terminal.boot;
            let bi = 0; const bootEl = document.getElementById('bootTxt'), bootScreen = document.getElementById('boot');

            function boot() {
                if (bi < bootMsgs.length) {
                    bootEl.textContent = bootMsgs[bi++];
                    setTimeout(boot, 120);
                } else {
                    setTimeout(() => bootScreen.classList.add('off'), 50);
                    // Restore red team mode from localStorage
                    if (savedRedTeam) {
                        redteam = true;
                        speedMult = 5;
                        document.body.classList.add('redteam');
                        document.getElementById('resetBtn').classList.add('show');
                        document.getElementById('profileImg').src = 'foto_profilo_red.png';
                        nameEl.textContent = 'HKMODD';
                        nameEl.dataset.text = 'HKMODD';
                    }
                }
            }
            boot();

            // ========== GLITCH TEXT ==========
            const nameEl = document.getElementById('name'), chars = '!@#$%^&*()_+-=[]{}|;:<>?/~`0123456789ABCDEF';
            setInterval(() => { if (Math.random() > .7) { const orig = nameEl.dataset.text, arr = orig.split(''), i = Math.floor(Math.random() * arr.length); arr[i] = chars[Math.floor(Math.random() * chars.length)]; nameEl.textContent = arr.join(''); setTimeout(() => nameEl.textContent = orig, 100) } }, 150);

            // ========== SCROLL REVEAL ==========
            const obs = new IntersectionObserver(e => e.forEach(x => { if (x.isIntersecting) x.target.classList.add('vis') }), { threshold: .1 });
            document.querySelectorAll('.reveal').forEach(el => obs.observe(el));

            // ========== TERMINAL OS - VIRTUAL OPERATING SYSTEM ==========
            class TerminalOS {
                constructor(inputEl, outputEl) {
                    this.input = inputEl;
                    this.output = outputEl;
                    this.historyIndex = -1;
                    this.cwd = '/home/hkmodd';
                    this.topMode = false;
                    this.topInterval = null;
                    this.crackMode = false;
                    this.crackInterval = null;
                    this.matrixMode = false;
                    this.currentUser = 'hkmodd';
                    this.isRoot = false;
                    this.flagUnlocked = false;

                    // Load from localStorage
                    this.history = JSON.parse(localStorage.getItem('darkcore_history') || '[]');
                    if (localStorage.getItem('darkcore_user') === 'root') {
                        this.isRoot = true;
                        this.currentUser = 'root';
                    }
                    if (localStorage.getItem('darkcore_flag') === 'true') {
                        this.flagUnlocked = true;
                    }

                    // Virtual File System
                    this.vfs = {
                        '/': { type: 'dir', children: ['home', 'bin', 'var', 'projects', 'etc', 'root'] },
                        '/home': { type: 'dir', children: ['hkmodd'] },
                        '/home/hkmodd': { type: 'dir', children: ['bio.txt', 'skills.json', '.secrets'] },
                        '/home/hkmodd/bio.txt': {
                            type: 'file', content: `SEBASTIANO GELMETTI
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Role: Junior SOC Analyst | Blue Team Specialist
Location: Italy
Status: OPERATIONAL

Mission: Defending critical infrastructure through 
proactive threat hunting and secure architecture.
Blending operational leadership with technical precision.

Contact: sebastiano.gelmetti@proton.me
GitHub: github.com/hkmodd
LinkedIn: linkedin.com/in/gelmetti-sebastiano` },
                        '/home/hkmodd/skills.json': {
                            type: 'file', content: `{
  "languages": ["Rust", "Python", "TypeScript", "Bash"],
  "security": ["SIEM", "Splunk", "Wireshark", "Threat Intel"],
  "expertise": ["Incident Response", "Malware Analysis", "Blue Team Ops"],
  "certifications": ["In Progress..."],
  "threat_level": "MAXIMUM"
}` },
                        '/home/hkmodd/.secrets': {
                            type: 'file', hidden: true, content: `‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  CLASSIFIED - EYES ONLY              ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë  Project: DARKCORE                   ‚ïë
‚ïë  Status: ACTIVE                      ‚ïë
‚ïë  Clearance: OVERLORD                 ‚ïë
‚ïë                                      ‚ïë
‚ïë  "The shadow knows all."             ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù` },
                        '/bin': { type: 'dir', children: ['ls', 'cd', 'cat', 'pwd', 'top', 'nmap', 'whois'] },
                        '/var': { type: 'dir', children: ['logs'] },
                        '/var/logs': { type: 'dir', children: ['sys.log', 'auth.log'] },
                        '/var/logs/sys.log': {
                            type: 'file', content: `[2026-01-23 03:14:15] SYSTEM: Kernel initialized
[2026-01-23 03:14:16] DARKCORE: Neural network online
[2026-01-23 03:14:17] SECURITY: Firewall rules loaded
[2026-01-23 03:14:18] NETWORK: Interface eth0 UP
[2026-01-23 03:14:19] AUTH: Session started for hkmodd
[2026-01-23 03:14:20] MONITOR: Threat detection active` },
                        '/var/logs/auth.log': {
                            type: 'file', content: `[ENCRYPTED] 4a6f686e20446f650a
[ENCRYPTED] 50617373776f72643a202a2a2a2a2a2a
[DECRYPTED] Unauthorized access attempt blocked
[ALERT] Konami sequence detected - OVERLORD mode available` },
                        '/projects': { type: 'dir', children: ['darkcore.md', 'instafollows.md', 'calcologas.md'] },
                        '/projects/darkcore.md': {
                            type: 'file', content: `# DarkCore-Manager
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Language: Rust
Status: ACTIVE

High-performance orchestration for compatibility layers.
Rust-native memory safety & VDF virtualization.

Repository: github.com/hkmodd/DarkCore-Manager` },
                        '/projects/instafollows.md': {
                            type: 'file', content: `# INSTAFollows-Ultimate
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Language: Rust + Tauri
Status: ACTIVE

Elite OSINT & Surveillance Tool.
Local privacy architecture with mass-management capabilities.

Repository: github.com/hkmodd/INSTAFollows-Ultimate` },
                        '/projects/calcologas.md': {
                            type: 'file', content: `# Calcologas
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Language: TypeScript
Status: DEPLOYED

Cinematic Utility WebApp.
Fallout-style aesthetics with synthesized sound engine.

Repository: github.com/hkmodd/Calcologas` },
                        '/etc': { type: 'dir', children: ['shadow', 'passwd', 'hosts'] },
                        '/etc/shadow': {
                            type: 'file', hidden: true, content: `root:$6$splunk$Xk3mZq:19000:0:99999:7:::
hkmodd:$6$locked$:19000:0:99999:7:::
# HINT: The password is the name of your favorite SIEM tool (lowercase)` },
                        '/etc/passwd': {
                            type: 'file', content: `root:x:0:0:root:/root:/bin/bash
hkmodd:x:1000:1000:Sebastiano:/home/hkmodd:/bin/bash` },
                        '/etc/hosts': {
                            type: 'file', content: `127.0.0.1   localhost
127.0.0.1   darkcore
192.168.1.1 gateway` },
                        '/root': { type: 'dir', protected: true, children: ['secrets'] },
                        '/root/secrets': { type: 'dir', protected: true, children: ['flag.txt', 'mission.md'] },
                        '/root/secrets/flag.txt': {
                            type: 'file', protected: true, content: `
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                                  ‚ïë
‚ïë   üö© FLAG{H4CK_TH3_PL4N3T_D4RKC0R3_2026}        ‚ïë
‚ïë                                                  ‚ïë
‚ïë   Congratulations, you've completed the CTF!     ‚ïë
‚ïë   You are now a certified DARKCORE Operative.    ‚ïë
‚ïë                                                  ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù` },
                        '/root/secrets/mission.md': {
                            type: 'file', protected: true, content: `# CLASSIFIED MISSION BRIEF
Status: EYES ONLY
Clearance: OVERLORD

Your next mission: Secure the perimeter.
Contact HQ for extraction coordinates.` },
                        '/bin/crack': { type: 'file', executable: true, content: '[BINARY - Execute with ./crack]' }
                    };

                    this.commands = {
                        help: () => this.cmdHelp(),
                        ls: (args) => this.cmdLs(args),
                        cd: (args) => this.cmdCd(args),
                        cat: (args) => this.cmdCat(args),
                        pwd: () => this.cmdPwd(),
                        clear: () => this.cmdClear(),
                        history: () => this.cmdHistory(),
                        whoami: () => this.isRoot ? 'root' : (redteam ? 'OVERLORD' : 'hkmodd'),
                        whois: () => this.cmdWhois(),
                        top: () => this.cmdTop(),
                        nmap: (args) => this.cmdNmap(args),
                        sudo: (args) => this.cmdSudo(args),
                        login: (args) => this.cmdLogin(args),
                        matrix: () => this.cmdMatrix(),
                        './crack': () => this.cmdCrack(),
                        crack: () => '<span class="warn">Try: ./crack</span>',
                        echo: (args) => args.join(' '),
                        date: () => new Date().toLocaleString(),
                        uname: () => 'DarkCore OS 1.0.0 x86_64 GNU/Linux',
                        id: () => this.isRoot ? 'uid=0(root) gid=0(root) groups=0(root)' : 'uid=1000(hkmodd) gid=1000(hkmodd)',
                        logout: () => this.cmdLogout(),
                        github: () => { open('https://github.com/hkmodd', '_blank'); return '<span class="ok">Opening GitHub...</span>'; },
                        linkedin: () => { open('https://www.linkedin.com/in/gelmetti-sebastiano/', '_blank'); return '<span class="ok">Opening LinkedIn...</span>'; },
                        cv: () => { open('CV_Sebastiano_Gelmetti.pdf', '_blank'); return '<span class="ok">Downloading CV...</span>'; },
                        exit: () => '<span class="warn">Nice try. There is no escape.</span>',
                        rm: () => '<span class="warn">Permission denied: readonly filesystem</span>',
                        vi: () => '<span class="ok">vim: command not found. Try: nano</span>',
                        nano: () => '<span class="warn">nano: readonly filesystem</span>',
                        neofetch: () => this.cmdNeofetch(),
                        flag: () => this.flagUnlocked ? 'FLAG{H4CK_TH3_PL4N3T_D4RKC0R3_2026}' : '<span class="warn">Access denied. Complete the challenge first.</span>'
                    };

                    this.init();
                }

                init() {
                    this.print('<span class="ok">DarkCore OS v1.0.0</span> - Type <span class="ok">help</span> for commands');
                    this.input.addEventListener('keydown', (e) => this.handleKeydown(e));
                    // Ensure input is visible on focus/click (mobile keyboard)
                    this.input.addEventListener('focus', () => setTimeout(() => this.scrollToBottom(), 300));
                    this.input.addEventListener('click', () => setTimeout(() => this.scrollToBottom(), 300));
                }

                getPrompt() {
                    const user = this.isRoot ? 'root' : (redteam ? 'OVERLORD' : 'hkmodd');
                    const host = redteam ? 'DARKCORE' : 'darkcore';
                    const path = this.cwd === '/home/hkmodd' ? '~' : this.cwd;
                    const symbol = this.isRoot ? '#' : '$';
                    return `${user}@${host}:${path}${symbol} `;
                }

                updatePrompt() {
                    const promptEl = this.input.previousElementSibling;
                    if (promptEl) promptEl.textContent = this.getPrompt();
                }

                handleKeydown(e) {
                    // Handle crack game spacebar
                    if (this.crackMode && e.code === 'Space') {
                        e.preventDefault();
                        this.handleCrackInput();
                        return;
                    }

                    if (this.topMode && e.key.toLowerCase() === 'q') {
                        this.exitTop();
                        e.preventDefault();
                        return;
                    }

                    if (e.key === 'Enter') {
                        const cmd = this.input.value.trim();
                        if (cmd) {
                            this.history.push(cmd);
                            this.historyIndex = this.history.length;
                            this.saveHistory();
                            this.execute(cmd);
                        }
                        this.input.value = '';
                        e.preventDefault();
                    } else if (e.key === 'ArrowUp') {
                        if (this.historyIndex > 0) {
                            this.historyIndex--;
                            this.input.value = this.history[this.historyIndex];
                        }
                        e.preventDefault();
                    } else if (e.key === 'ArrowDown') {
                        if (this.historyIndex < this.history.length - 1) {
                            this.historyIndex++;
                            this.input.value = this.history[this.historyIndex];
                        } else {
                            this.historyIndex = this.history.length;
                            this.input.value = '';
                        }
                        e.preventDefault();
                    } else if (e.key === 'Tab') {
                        e.preventDefault();
                        // Basic tab completion
                        const partial = this.input.value.trim();
                        const matches = Object.keys(this.commands).filter(c => c.startsWith(partial));
                        if (matches.length === 1) this.input.value = matches[0] + ' ';
                    }
                }

                execute(cmdLine) {
                    const parts = cmdLine.split(/\s+/);
                    const cmd = parts[0].toLowerCase();
                    const args = parts.slice(1);

                    this.print(`<span class="muted">${this.getPrompt()}${this.escapeHtml(cmdLine)}</span>`);

                    if (this.commands[cmd]) {
                        const result = this.commands[cmd](args);
                        if (result) this.print(result);
                    } else {
                        this.print(`<span class="warn">bash: ${cmd}: command not found</span>`);
                    }

                    this.updatePrompt();
                    this.scrollToBottom();
                }

                print(html) {
                    this.output.innerHTML += html + '\n';
                }

                scrollToBottom() {
                    this.output.scrollTop = this.output.scrollHeight;
                    // Ensure the input line is visible in the main viewport
                    setTimeout(() => {
                        this.input.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }, 10);
                }

                escapeHtml(str) {
                    return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
                }

                resolvePath(path) {
                    if (!path) return this.cwd;
                    if (path === '~') return '/home/hkmodd';
                    if (path.startsWith('~/')) return '/home/hkmodd' + path.slice(1);
                    if (path.startsWith('/')) return path;

                    let parts = this.cwd.split('/').filter(Boolean);
                    for (const part of path.split('/')) {
                        if (part === '..') parts.pop();
                        else if (part !== '.') parts.push(part);
                    }
                    return '/' + parts.join('/') || '/';
                }

                // ===== COMMANDS =====
                cmdHelp() {
                    return `<span class="ok">DarkCore Terminal v1.0</span>
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
<span class="ok">Navigation:</span>
  ls [-la]      List directory contents
  cd &lt;dir&gt;      Change directory
  pwd           Print working directory
  cat &lt;file&gt;    Display file contents

<span class="ok">System:</span>
  clear         Clear terminal
  history       Command history
  whoami        Current user
  uname         System info
  date          Current date/time

<span class="ok">Apps:</span>
  top           Process viewer (q to exit)
  whois         Identity card
  nmap &lt;host&gt;   Port scanner
  neofetch      System info

<span class="ok">Links:</span>
  github        Open GitHub
  linkedin      Open LinkedIn
  cv            Download CV`;
                }

                cmdLs(args) {
                    const showAll = args.includes('-a') || args.includes('-la') || args.includes('-al');
                    const longFormat = args.includes('-l') || args.includes('-la') || args.includes('-al');
                    const targetPath = args.find(a => !a.startsWith('-')) || this.cwd;
                    const resolved = this.resolvePath(targetPath);
                    const node = this.vfs[resolved];

                    if (!node) return `<span class="warn">ls: cannot access '${targetPath}': No such file or directory</span>`;
                    if (node.type !== 'dir') return `<span class="warn">ls: ${targetPath}: Not a directory</span>`;

                    let items = node.children.filter(name => {
                        const itemPath = resolved === '/' ? '/' + name : resolved + '/' + name;
                        const item = this.vfs[itemPath];
                        if (!showAll && (name.startsWith('.') || (item && item.hidden))) return false;
                        if (!redteam && item && item.hidden) return false;
                        return true;
                    });

                    // Add hidden files in red team mode
                    if (redteam && showAll) {
                        if (!items.includes('.passwords')) items.push('.passwords');
                    }

                    if (longFormat) {
                        let output = `total ${items.length}\n`;
                        output += items.map(name => {
                            const itemPath = resolved === '/' ? '/' + name : resolved + '/' + name;
                            const item = this.vfs[itemPath];
                            const isDir = item && item.type === 'dir';
                            const perms = isDir ? 'drwxr-xr-x' : '-rw-r--r--';
                            const size = item && item.content ? item.content.length : 4096;
                            const color = isDir ? 'ok' : (name.startsWith('.') ? 'warn' : '');
                            const nameHtml = color ? `<span class="${color}">${name}</span>` : name;
                            return `${perms}  1 hkmodd hkmodd ${String(size).padStart(5)} Jan 23 03:14 ${nameHtml}`;
                        }).join('\n');
                        return output;
                    }

                    return items.map(name => {
                        const itemPath = resolved === '/' ? '/' + name : resolved + '/' + name;
                        const item = this.vfs[itemPath];
                        const isDir = item && item.type === 'dir';
                        if (isDir) return `<span class="ok">${name}/</span>`;
                        if (name.startsWith('.')) return `<span class="warn">${name}</span>`;
                        return name;
                    }).join('  ');
                }

                cmdCd(args) {
                    const target = args[0] || '/home/hkmodd';
                    const resolved = this.resolvePath(target);
                    const node = this.vfs[resolved];

                    if (!node) return `<span class="warn">bash: cd: ${target}: No such file or directory</span>`;
                    if (node.type !== 'dir') return `<span class="warn">bash: cd: ${target}: Not a directory</span>`;
                    if (node.protected && !this.isRoot && !this.flagUnlocked) return `<span class="warn">bash: cd: ${target}: Permission denied</span>`;

                    this.cwd = resolved;
                    return '';
                }

                cmdCat(args) {
                    if (!args[0]) return '<span class="warn">cat: missing operand</span>';
                    const resolved = this.resolvePath(args[0]);
                    const node = this.vfs[resolved];

                    if (!node) return `<span class="warn">cat: ${args[0]}: No such file or directory</span>`;
                    if (node.type === 'dir') return `<span class="warn">cat: ${args[0]}: Is a directory</span>`;
                    if (node.hidden && !redteam) return `<span class="warn">cat: ${args[0]}: Permission denied</span>`;
                    if (node.protected && !this.isRoot && !this.flagUnlocked) return `<span class="warn">cat: ${args[0]}: Permission denied (root access required)</span>`;

                    return this.escapeHtml(node.content);
                }

                cmdPwd() { return this.cwd; }

                cmdClear() { this.output.innerHTML = ''; return ''; }

                cmdHistory() {
                    return this.history.map((cmd, i) => `  ${String(i + 1).padStart(3)}  ${cmd}`).join('\n');
                }

                cmdWhois() {
                    const border = redteam ? '‚ïê' : '‚îÄ';
                    const status = redteam ? '<span class="warn">OVERLORD</span>' : '<span class="ok">OPERATIVE</span>';
                    return `
‚ïî${'‚ïê'.repeat(42)}‚ïó
‚ïë  <span class="ok">IDENTITY CARD</span>                           ‚ïë
‚ï†${'‚ïê'.repeat(42)}‚ï£
‚ïë  Name: Sebastiano Gelmetti               ‚ïë
‚ïë  Alias: HKMODD                           ‚ïë
‚ïë  Role: SOC Analyst | Blue Team           ‚ïë
‚ïë  Status: ${status}                        ‚ïë
‚ïë  Clearance: ${redteam ? 'MAXIMUM' : 'STANDARD'}                       ‚ïë
‚ïö${'‚ïê'.repeat(42)}‚ïù`;
                }

                cmdTop() {
                    this.topMode = true;
                    this.output.innerHTML = '';
                    this.input.disabled = true;
                    this.input.placeholder = "Press 'q' to exit";

                    const updateTop = () => {
                        const cpu = (Math.random() * 30 + 10).toFixed(1);
                        const mem = (Math.random() * 20 + 40).toFixed(1);
                        const procs = [
                            { pid: 1, user: 'root', cpu: '0.1', mem: '0.5', cmd: 'systemd' },
                            { pid: 847, user: 'hkmodd', cpu: (Math.random() * 5).toFixed(1), mem: '2.3', cmd: 'splunkd' },
                            { pid: 923, user: 'hkmodd', cpu: (Math.random() * 8).toFixed(1), mem: '4.1', cmd: 'rustc --edition 2021' },
                            { pid: 1024, user: 'root', cpu: (Math.random() * 3).toFixed(1), mem: '1.2', cmd: 'nmap -sS' },
                            { pid: 1337, user: 'hkmodd', cpu: (Math.random() * 2).toFixed(1), mem: '3.7', cmd: 'python3 threat_hunt.py' },
                            { pid: 2048, user: 'hkmodd', cpu: (Math.random() * 4).toFixed(1), mem: '5.2', cmd: redteam ? 'darkcore --overlord' : 'darkcore' }
                        ];

                        this.output.innerHTML = `<span class="ok">top</span> - ${new Date().toLocaleTimeString()} up 42 days, load: ${cpu}%
Tasks: ${procs.length} total, 1 running
%Cpu(s): <span class="ok">${cpu}</span> us | %Mem: <span class="ok">${mem}</span>

<span class="muted">  PID USER      %CPU  %MEM  COMMAND</span>
${procs.map(p => `${String(p.pid).padStart(5)} ${p.user.padEnd(9)} ${p.cpu.padStart(5)}  ${p.mem.padStart(4)}  ${p.cmd}`).join('\n')}

<span class="muted">Press 'q' to exit</span>`;
                    };

                    updateTop();
                    this.topInterval = setInterval(updateTop, 1000);
                    return '';
                }

                exitTop() {
                    this.topMode = false;
                    clearInterval(this.topInterval);
                    this.input.disabled = false;
                    this.input.placeholder = '';
                    this.output.innerHTML = '';
                    this.print('<span class="ok">Exited top</span>');
                    this.input.focus();
                }

                cmdNmap(args) {
                    const target = args[0] || '127.0.0.1';
                    setTimeout(() => {
                        this.print(`Starting Nmap scan on ${target}...`);
                        setTimeout(() => this.print('Scanning ports 1-1000...'), 300);
                        setTimeout(() => this.print('Discovering services...'), 600);
                        setTimeout(() => this.print('Running scripts...'), 900);
                        setTimeout(() => {
                            this.print(`
<span class="ok">Nmap scan report for ${target}</span>
Host is up (0.0012s latency).
Not shown: 997 closed ports

PORT    STATE SERVICE
<span class="ok">22/tcp  open  ssh</span>
<span class="ok">80/tcp  open  http</span>
<span class="ok">443/tcp open  https</span>
${redteam ? '<span class="warn">1337/tcp open  darkcore</span>' : ''}

Nmap done: 1 IP address (1 host up)`);
                            this.scrollToBottom();
                        }, 1500);
                    }, 100);
                    return '';
                }

                cmdSudo(args) {
                    if (redteam) {
                        return `<span class="ok">[sudo] ROOT ACCESS CONFIRMED</span>
Executing: ${args.join(' ') || 'bash'}`;
                    }
                    return `<span class="warn">[sudo] password for hkmodd: 
hkmodd is not in the sudoers file. This incident will be reported.</span>`;
                }

                cmdNeofetch() {
                    const os = redteam ? 'DarkCore OS (OVERLORD Edition)' : 'DarkCore OS 1.0.0';
                    return `
<span class="ok">       ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ</span>       <span class="ok">hkmodd</span>@<span class="ok">darkcore</span>
<span class="ok">     ‚ñÑ‚ñÄ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñÄ‚ñÑ</span>     ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
<span class="ok">    ‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà</span>     <span class="ok">OS:</span> ${os}
<span class="ok">   ‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà</span>     <span class="ok">Host:</span> GitHub Pages
<span class="ok">   ‚ñà‚ñë‚ñë‚ñÄ‚ñÑ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñÑ‚ñÄ‚ñë‚ñë‚ñë‚ñà</span>      <span class="ok">Kernel:</span> JavaScript ES2024
<span class="ok">   ‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà</span>      <span class="ok">Shell:</span> TerminalOS 1.0
<span class="ok">   ‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà</span>      <span class="ok">Theme:</span> ${redteam ? 'DARKCORE [RED]' : 'DarkCore Cyan'}
<span class="ok">    ‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà</span>       <span class="ok">CPU:</span> Neural Network v2
<span class="ok">     ‚ñÄ‚ñÑ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñÑ‚ñÄ</span>        <span class="ok">Memory:</span> 1337MB / ‚àû
<span class="ok">       ‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñÄ‚ñÄ</span>          <span class="ok">Status:</span> ${redteam ? 'OVERLORD MODE' : 'OPERATIONAL'}`;
                }

                // ===== CTF COMMANDS =====
                cmdLogin(args) {
                    if (args.length < 2) return '<span class="warn">Usage: login <user> <password></span>';
                    const [user, pass] = args;
                    if (user === 'root' && pass === 'splunk') {
                        this.isRoot = true;
                        this.currentUser = 'root';
                        localStorage.setItem('darkcore_user', 'root');
                        this.updatePrompt();
                        return `<span class="ok">Authentication successful.</span>
Welcome, root. Full system access granted.
<span class="warn">WARNING: All actions are logged.</span>`;
                    }
                    return '<span class="warn">Authentication failed: Invalid credentials</span>';
                }

                cmdLogout() {
                    if (!this.isRoot) return '<span class="muted">Not logged in as root.</span>';
                    this.isRoot = false;
                    this.currentUser = 'hkmodd';
                    localStorage.removeItem('darkcore_user');
                    this.updatePrompt();
                    return '<span class="ok">Logged out. Session terminated.</span>';
                }

                cmdMatrix() {
                    this.matrixMode = true;
                    const chars = '„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà„Éä„Éã„Éå„Éç„Éé„Éè„Éí„Éï„Éò„Éõ„Éû„Éü„É†„É°„É¢„É§„É¶„É®„É©„É™„É´„É¨„É≠„ÉØ„É≤„É≥0123456789';
                    let frames = 0;
                    const maxFrames = 50;

                    const interval = setInterval(() => {
                        let line = '';
                        for (let i = 0; i < 60; i++) {
                            const c = chars[Math.floor(Math.random() * chars.length)];
                            line += Math.random() > 0.7 ? `<span class="ok">${c}</span>` : `<span class="muted">${c}</span>`;
                        }
                        this.print(line);
                        this.scrollToBottom();
                        if (++frames >= maxFrames) {
                            clearInterval(interval);
                            this.matrixMode = false;
                            this.print('<span class="ok">Wake up, Neo...</span>');
                        }
                    }, 100);
                    return '<span class="ok">Entering the Matrix...</span>';
                }

                cmdCrack() {
                    if (this.flagUnlocked) return '<span class="ok">Flag already unlocked! Check /root/secrets</span>';
                    this.crackMode = true;
                    this.crackStage = 1;
                    this.crackPos = 0;
                    this.crackDir = 1;
                    this.crackSpeed = 80;
                    this.input.disabled = true;
                    this.input.placeholder = "Press SPACE at the sweet spot!";

                    this.print('<span class="ok">‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó</span>');
                    this.print('<span class="ok">‚ïë  CRACK v1.0 - Password Breaker     ‚ïë</span>');
                    this.print('<span class="ok">‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£</span>');
                    this.print(`<span class="muted">Stage ${this.crackStage}/3 - Press SPACE at the green zone!</span>`);

                    this.updateCrackGame();
                    return '';
                }

                updateCrackGame() {
                    const width = 30;
                    const sweetSpot = 14;

                    this.crackInterval = setInterval(() => {
                        this.crackPos += this.crackDir;
                        if (this.crackPos >= width - 1 || this.crackPos <= 0) this.crackDir *= -1;

                        let bar = '';
                        for (let i = 0; i < width; i++) {
                            if (i === this.crackPos) bar += '<span style="color:#ff0">‚ñà</span>';
                            else if (i >= sweetSpot - 1 && i <= sweetSpot + 1) bar += '<span style="color:#0f0">‚ñì</span>';
                            else bar += '‚ñë';
                        }

                        // Update last line
                        const lines = this.output.innerHTML.split('\n');
                        lines[lines.length - 1] = `[${bar}]`;
                        this.output.innerHTML = lines.join('\n');
                    }, this.crackSpeed);
                }

                handleCrackInput() {
                    const sweetSpot = 14;
                    const hit = Math.abs(this.crackPos - sweetSpot) <= 1;

                    clearInterval(this.crackInterval);

                    if (hit) {
                        this.print(`<span class="ok">‚úì Stage ${this.crackStage} COMPLETE!</span>`);
                        if (this.crackStage >= 3) {
                            this.crackMode = false;
                            this.flagUnlocked = true;
                            localStorage.setItem('darkcore_flag', 'true');
                            this.input.disabled = false;
                            this.input.placeholder = '';
                            this.print('<span class="ok">‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó</span>');
                            this.print('<span class="ok">‚ïë  ACCESS GRANTED - FLAG UNLOCKED!   ‚ïë</span>');
                            this.print('<span class="ok">‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù</span>');
                            this.print('<span class="warn">üö© FLAG{H4CK_TH3_PL4N3T_D4RKC0R3_2026}</span>');
                            this.print('<span class="muted">/root/secrets is now accessible!</span>');
                            this.input.focus();
                        } else {
                            this.crackStage++;
                            this.crackSpeed = Math.max(30, this.crackSpeed - 20);
                            this.print(`<span class="muted">Stage ${this.crackStage}/3 - Speed increased!</span>`);
                            this.updateCrackGame();
                        }
                    } else {
                        this.crackMode = false;
                        this.input.disabled = false;
                        this.input.placeholder = '';
                        this.print('<span class="warn">‚úó FAILED! Security lockout triggered.</span>');
                        this.print('<span class="muted">Try again with ./crack</span>');
                        this.input.focus();
                    }
                }

                saveHistory() {
                    localStorage.setItem('darkcore_history', JSON.stringify(this.history.slice(-50)));
                }
            }

            // Initialize Terminal
            const terminal = new TerminalOS(
                document.getElementById('in'),
                document.getElementById('out')
            );

            // ========== KONAMI CODE - RED TEAM ACTIVATION ==========
            const konami = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'KeyB', 'KeyA'];
            let ki = 0;

            function triggerRedTeam() {
                // Cancel hint timer
                if (hintTimer) {
                    clearTimeout(hintTimer);
                    hintTimer = null;
                }

                // Initialize audio on first interaction
                if (!sfxTrigger) initAudio();

                // 1. Play trigger SFX
                sfxTrigger.currentTime = 0;
                sfxTrigger.play().catch(() => { });

                // 2. Start ambiance loop
                sfxAmbiance.play().catch(() => { });

                // 3. Create screen flash
                const flash = document.createElement('div');
                flash.className = 'screen-flash';
                document.body.appendChild(flash);
                setTimeout(() => flash.remove(), 500);

                // 4. Activate glitch on avatar
                const avatarContainer = document.getElementById('avatarContainer');
                const profileImg = document.getElementById('profileImg');
                avatarContainer.classList.add('glitch-active');

                // 5. Swap image AND identity after 250ms (mid-glitch)
                setTimeout(() => {
                    profileImg.src = 'foto_profilo_red.png';
                    // IDENTITY SHIFT: Sebastiano Gelmetti ‚Üí HKMODD
                    nameEl.textContent = 'HKMODD';
                    nameEl.dataset.text = 'HKMODD';
                }, 250);

                // 6. Remove glitch class after 500ms
                setTimeout(() => {
                    avatarContainer.classList.remove('glitch-active');
                }, 500);

                // 7. Apply red team mode
                redteam = true;
                speedMult = 5;
                document.body.classList.add('redteam');
                localStorage.setItem('darkcore_redteam', 'true');
                document.getElementById('resetBtn').classList.add('show');
                terminal.updatePrompt();

                // 8. Show alert
                const al = document.getElementById('alert');
                al.classList.add('show');
                setTimeout(() => al.classList.remove('show'), 3000);
            }

            // ========== RESET TO BLUE MODE (Global for onclick) ==========
            window.resetToBlueMode = function () {
                redteam = false;
                speedMult = 1;
                document.body.classList.remove('redteam');
                // Clear ALL localStorage states
                localStorage.removeItem('darkcore_redteam');
                localStorage.removeItem('darkcore_user');
                localStorage.removeItem('darkcore_flag');
                localStorage.removeItem('darkcore_history');
                // Reset terminal state
                if (terminal) {
                    terminal.isRoot = false;
                    terminal.currentUser = 'hkmodd';
                    terminal.flagUnlocked = false;
                    terminal.updatePrompt();
                }
                document.getElementById('resetBtn').classList.remove('show');
                document.getElementById('profileImg').src = 'foto_profilo.png';
                nameEl.textContent = 'Sebastiano Gelmetti';
                nameEl.dataset.text = 'Sebastiano Gelmetti';
                sfxAmbiance?.pause();
            }

            addEventListener('keydown', e => {
                if (e.code === konami[ki]) {
                    if (++ki === konami.length) {
                        triggerRedTeam();
                        ki = 0;
                    }
                } else ki = 0
            });

            // ========== SHADOW HINT POPUP (20s Timer) ==========
            let hintTimer = setTimeout(() => {
                if (!redteam) {
                    const hint = document.getElementById('hintPopup');
                    hint.classList.add('show');
                    setTimeout(() => hint.classList.remove('show'), 8000);
                }
            }, 20000);

            // ========== MOBILE 7-TAP TRIGGER (Developer Mode Pattern) ==========
            const avatarEl = document.getElementById('avatarContainer');
            let tapCount = 0;
            let tapTimer = null;
            const TAP_WINDOW = 2000; // 2 seconds to complete 7 taps
            const REQUIRED_TAPS = 7;

            function vibrate(ms) {
                if (navigator.vibrate) navigator.vibrate(ms);
            }

            avatarEl.addEventListener('touchstart', (e) => {
                if (redteam) return;
                e.preventDefault(); // Prevent double-tap zoom

                // Visual feedback - press
                avatarEl.classList.add('pressed');

                // Haptic feedback on each tap
                vibrate(20);

                tapCount++;

                // Pulse animation
                avatarEl.classList.remove('pulse-tap');
                void avatarEl.offsetWidth; // Trigger reflow
                avatarEl.classList.add('pulse-tap');

                // Reset timer on each tap
                if (tapTimer) clearTimeout(tapTimer);
                tapTimer = setTimeout(() => {
                    tapCount = 0;
                }, TAP_WINDOW);

                // Check for success
                if (tapCount >= REQUIRED_TAPS) {
                    vibrate(200); // Success haptic
                    tapCount = 0;
                    clearTimeout(tapTimer);
                    triggerRedTeam();
                }
            });

            avatarEl.addEventListener('touchend', () => {
                avatarEl.classList.remove('pressed');
            });

            // Desktop click DISABLED - easter egg is mobile-only (7 taps)
            // Use Konami code on desktop instead

            // ========== HOLOGRAPHIC TILT & SPOTLIGHT ==========
            const cards = document.querySelectorAll('.card');

            document.addEventListener('mousemove', e => {
                cards.forEach(card => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;

                    // Spotlight Position
                    card.style.setProperty('--x', `${x}px`);
                    card.style.setProperty('--y', `${y}px`);
                });
            });

            // ========== TEXT SCRAMBLE EFFECT ==========
            class ScrambleText {
                constructor(el) {
                    this.el = el;
                    this.chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%&';
                    this.originalText = el.innerText;
                    this.frameRequest = null;
                    this.frame = 0;
                    this.queue = [];
                    this.resolve = this.resolve.bind(this);

                    this.updateQueue();

                    this.el.addEventListener('mouseenter', () => {
                        this.frame = 0;
                        this.updateQueue();
                        cancelAnimationFrame(this.frameRequest);
                        this.frameRequest = requestAnimationFrame(this.resolve);
                    });
                }

                updateQueue() {
                    this.queue = [];
                    for (let i = 0; i < this.originalText.length; i++) {
                        const from = this.originalText[i];
                        const to = this.originalText[i];
                        const start = Math.floor(Math.random() * 10); // Random start
                        const end = start + Math.floor(Math.random() * 10) + 5; // Duration
                        this.queue.push({ from, to, start, end });
                    }
                }

                resolve() {
                    let complete = 0;
                    let output = '';

                    for (let i = 0; i < this.queue.length; i++) {
                        let { from, to, start, end, char } = this.queue[i];

                        if (this.frame >= end) {
                            complete++;
                            output += to;
                        } else if (this.frame >= start) {
                            if (!char || Math.random() < 0.28) {
                                char = this.chars[Math.floor(Math.random() * this.chars.length)];
                                this.queue[i].char = char;
                            }
                            output += char;
                        } else {
                            output += from;
                        }
                    }

                    this.el.innerText = output;

                    if (complete === this.queue.length) {
                        return;
                    }

                    this.frame++;
                    this.frameRequest = requestAnimationFrame(this.resolve);
                }
            }






            // ========== CINEMATIC GRAIN INIT ==========
            const grain = document.createElement('div');
            grain.classList.add('grain');
            document.body.appendChild(grain);

            // Tilt only on hover to prevent dizziness
            cards.forEach(card => {
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;

                    const rotateX = ((y - centerY) / centerY) * -2;
                    const rotateY = ((x - centerX) / centerX) * 2;

                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`;
                });

                card.addEventListener('mouseleave', () => {
                    card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)';
                });
            });
            // Init Language Manager (Delayed to ensure dependencies like bootMsgs/terminal are ready)
            new LanguageManager();
        })();
    </script>
</body>

</html>